# ğŸš€ VEO AI ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æŒ‡å—

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### 1. æœåŠ¡å™¨è¦æ±‚

**æœ€ä½é…ç½®**ï¼š
- CPU: 2æ ¸å¿ƒ
- å†…å­˜: 4GB
- å­˜å‚¨: 20GB SSD
- ç³»ç»Ÿ: Ubuntu 20.04+ / CentOS 7+

**æ¨èé…ç½®**ï¼š
- CPU: 4æ ¸å¿ƒ
- å†…å­˜: 8GB
- å­˜å‚¨: 50GB SSD

---

### 2. ç¯å¢ƒå˜é‡é…ç½®

åˆ›å»º `.env` æ–‡ä»¶å¹¶é…ç½®ä»¥ä¸‹å˜é‡ï¼š

```env
# æ•°æ®åº“é…ç½®
DATABASE_URL="postgresql://postgres:å¯†ç @host:5432/postgres"

# Supabaseé…ç½®ï¼ˆå¿…éœ€ï¼‰
SUPABASE_URL="https://hblthmkkdfkzvpywlthq.supabase.co"
SUPABASE_SERVICE_KEY="ä½ çš„service_roleå¯†é’¥"

# NextAuthé…ç½®
NEXTAUTH_SECRET="ç”Ÿæˆä¸€ä¸ªéšæœºå¯†é’¥"
NEXTAUTH_URL="https://ä½ çš„åŸŸå.com"

# VEO API
VEO_API_KEY="ä½ çš„VEO_APIå¯†é’¥"

# é‚®ä»¶æœåŠ¡ï¼ˆå¯é€‰ï¼‰
RESEND_API_KEY="ä½ çš„Resendå¯†é’¥"
EMAIL_FROM="VEO AI <noreply@ä½ çš„åŸŸå.com>"

# çŸ­ä¿¡æœåŠ¡ï¼ˆå¯é€‰ï¼‰
TWILIO_ACCOUNT_SID="ä½ çš„Twilioè´¦æˆ·"
TWILIO_AUTH_TOKEN="ä½ çš„Twilioå¯†é’¥"
TWILIO_PHONE_NUMBER="+1ä½ çš„å·ç "

# å¾®ä¿¡ç™»å½•ï¼ˆå¯é€‰ï¼‰
WECHAT_APP_ID="ä½ çš„å¾®ä¿¡AppID"
WECHAT_APP_SECRET="ä½ çš„å¾®ä¿¡å¯†é’¥"

# ç¯å¢ƒ
NODE_ENV="production"
```

---

## ğŸ› ï¸ éƒ¨ç½²æ­¥éª¤

### æ–¹æ³•1ï¼šä½¿ç”¨1Panelï¼ˆæ¨èï¼‰

#### æ­¥éª¤1ï¼šå®‰è£…1Panel
```bash
curl -sSL https://resource.fit2cloud.com/1panel/package/quick_start.sh -o quick_start.sh
sudo bash quick_start.sh
```

#### æ­¥éª¤2ï¼šåˆ›å»ºç½‘ç«™
1. ç™»å½•1Panelé¢æ¿
2. ç½‘ç«™ â†’ åˆ›å»ºç½‘ç«™
3. é€‰æ‹© Node.js ç¯å¢ƒ
4. é…ç½®åŸŸåå’Œç«¯å£

#### æ­¥éª¤3ï¼šéƒ¨ç½²é¡¹ç›®
```bash
# ä¸Šä¼ é¡¹ç›®æ–‡ä»¶åˆ°æœåŠ¡å™¨
scp -r veo-ai-platform/ root@æœåŠ¡å™¨IP:/opt/1panel/apps/

# SSHè¿æ¥æœåŠ¡å™¨
ssh root@æœåŠ¡å™¨IP

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /opt/1panel/apps/veo-ai-platform

# å®‰è£…ä¾èµ–
npm install --production

# æ„å»ºé¡¹ç›®
npm run build

# ä½¿ç”¨PM2å¯åŠ¨
npm install -g pm2
pm2 start npm --name "veo-ai" -- start
pm2 save
pm2 startup
```

#### æ­¥éª¤4ï¼šé…ç½®HTTPS
1. åœ¨1Panelä¸­è¿›å…¥ç½‘ç«™è®¾ç½®
2. HTTPS â†’ ç”³è¯·è¯ä¹¦
3. é€‰æ‹© Let's Encrypt
4. å¡«å†™åŸŸåå¹¶ç”³è¯·
5. å¼€å¯å¼ºåˆ¶HTTPS

---

### æ–¹æ³•2ï¼šæ‰‹åŠ¨éƒ¨ç½²

#### æ­¥éª¤1ï¼šå®‰è£…Node.js
```bash
# å®‰è£…Node.js 18
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo bash -
sudo apt install -y nodejs

# éªŒè¯å®‰è£…
node --version
npm --version
```

#### æ­¥éª¤2ï¼šéƒ¨ç½²é¡¹ç›®
```bash
# å…‹éš†é¡¹ç›®
git clone ä½ çš„ä»“åº“åœ°å€
cd veo-ai-platform

# å®‰è£…ä¾èµ–
npm install --production

# åˆ›å»º.envæ–‡ä»¶
cp env-template.txt .env
# ç¼–è¾‘.envå¡«å…¥é…ç½®

# æ„å»ºé¡¹ç›®
npm run build

# å¯åŠ¨æœåŠ¡
npm start
```

#### æ­¥éª¤3ï¼šé…ç½®è¿›ç¨‹ç®¡ç†
```bash
# å®‰è£…PM2
npm install -g pm2

# å¯åŠ¨åº”ç”¨
pm2 start npm --name "veo-ai" -- start

# ä¿å­˜é…ç½®
pm2 save

# è®¾ç½®å¼€æœºè‡ªå¯
pm2 startup
```

#### æ­¥éª¤4ï¼šé…ç½®Nginxåå‘ä»£ç†
```nginx
server {
    listen 80;
    server_name ä½ çš„åŸŸå.com;
    
    location / {
        proxy_pass http://127.0.0.1:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}
```

#### æ­¥éª¤5ï¼šé…ç½®SSLè¯ä¹¦
```bash
# å®‰è£…Certbot
sudo apt install certbot python3-certbot-nginx

# ç”³è¯·è¯ä¹¦
sudo certbot --nginx -d ä½ çš„åŸŸå.com

# è‡ªåŠ¨ç»­æœŸ
sudo certbot renew --dry-run
```

---

## ğŸ” éƒ¨ç½²æ£€æŸ¥æ¸…å•

### éƒ¨ç½²å‰
- [ ] æœåŠ¡å™¨é…ç½®æ»¡è¶³è¦æ±‚
- [ ] åŸŸåå·²è§£æåˆ°æœåŠ¡å™¨IP
- [ ] ç¯å¢ƒå˜é‡å·²é…ç½®
- [ ] æ•°æ®åº“è¿æ¥æ­£å¸¸
- [ ] Supabaseé…ç½®æ­£ç¡®

### éƒ¨ç½²ä¸­
- [ ] é¡¹ç›®æ–‡ä»¶å·²ä¸Šä¼ 
- [ ] ä¾èµ–å®‰è£…æˆåŠŸ
- [ ] é¡¹ç›®æ„å»ºæˆåŠŸ
- [ ] åº”ç”¨å¯åŠ¨æ­£å¸¸
- [ ] ç«¯å£æ­£å¸¸ç›‘å¬

### éƒ¨ç½²å
- [ ] ç½‘ç«™å¯ä»¥è®¿é—®
- [ ] HTTPSè¯ä¹¦æœ‰æ•ˆ
- [ ] ç”¨æˆ·æ³¨å†Œç™»å½•æ­£å¸¸
- [ ] æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½æ­£å¸¸
- [ ] è§†é¢‘ç”ŸæˆåŠŸèƒ½æ­£å¸¸
- [ ] æ‰€æœ‰é¡µé¢å“åº”æ­£å¸¸

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. æ•°æ®åº“ä¼˜åŒ–
```sql
-- æ·»åŠ ç´¢å¼•
CREATE INDEX IF NOT EXISTS idx_video_user_created 
ON video_generations(user_id, created_at DESC);

CREATE INDEX IF NOT EXISTS idx_credit_user_created 
ON credit_transactions(user_id, created_at DESC);
```

### 2. Nginxä¼˜åŒ–
```nginx
# å¯ç”¨Gzipå‹ç¼©
gzip on;
gzip_vary on;
gzip_min_length 1024;
gzip_types text/plain text/css text/xml text/javascript 
           application/javascript application/xml+rss application/json;

# é™æ€æ–‡ä»¶ç¼“å­˜
location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2)$ {
    expires 1y;
    add_header Cache-Control "public, immutable";
}
```

### 3. PM2é›†ç¾¤æ¨¡å¼
```bash
# ä½¿ç”¨æ‰€æœ‰CPUæ ¸å¿ƒ
pm2 start npm --name "veo-ai" -i max -- start
```

---

## ğŸ”’ å®‰å…¨å»ºè®®

### 1. é˜²ç«å¢™é…ç½®
```bash
# åªå¼€æ”¾å¿…è¦ç«¯å£
sudo ufw allow 22/tcp   # SSH
sudo ufw allow 80/tcp   # HTTP
sudo ufw allow 443/tcp  # HTTPS
sudo ufw enable
```

### 2. å®šæœŸå¤‡ä»½
```bash
# å¤‡ä»½æ•°æ®åº“
pg_dump database_name > backup_$(date +%Y%m%d).sql

# å¤‡ä»½é¡¹ç›®æ–‡ä»¶
tar -czf veo-ai-backup_$(date +%Y%m%d).tar.gz veo-ai-platform/
```

### 3. ç›‘æ§å’Œæ—¥å¿—
```bash
# æŸ¥çœ‹PM2æ—¥å¿—
pm2 logs veo-ai

# æŸ¥çœ‹Nginxæ—¥å¿—
tail -f /var/log/nginx/access.log
tail -f /var/log/nginx/error.log
```

---

## ğŸš¨ æ•…éšœæ’é™¤

### åº”ç”¨æ— æ³•å¯åŠ¨
```bash
# æ£€æŸ¥æ—¥å¿—
pm2 logs veo-ai --err

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep 3000

# é‡å¯åº”ç”¨
pm2 restart veo-ai
```

### HTTPSè¯ä¹¦é—®é¢˜
```bash
# æ£€æŸ¥è¯ä¹¦çŠ¶æ€
sudo certbot certificates

# å¼ºåˆ¶ç»­æœŸ
sudo certbot renew --force-renewal
```

### æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æµ‹è¯•æ•°æ®åº“è¿æ¥
psql "postgresql://user:pass@host:5432/db"

# æ£€æŸ¥ç¯å¢ƒå˜é‡
echo $DATABASE_URL
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

**å¸¸ç”¨å‘½ä»¤**ï¼š
```bash
# æŸ¥çœ‹åº”ç”¨çŠ¶æ€
pm2 status

# é‡å¯åº”ç”¨
pm2 restart veo-ai

# æŸ¥çœ‹æ—¥å¿—
pm2 logs veo-ai

# æŸ¥çœ‹ç³»ç»Ÿèµ„æº
htop
df -h
free -m
```

**éœ€è¦å¸®åŠ©ï¼Ÿ**
æŸ¥çœ‹å®Œæ•´æ–‡æ¡£æˆ–æ£€æŸ¥æ—¥å¿—è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯ã€‚

---

**éƒ¨ç½²å®Œæˆåï¼Œæ‚¨çš„VEO AIå¹³å°å°±å¯ä»¥æ­£å¼ä¸Šçº¿äº†ï¼** ğŸ‰










