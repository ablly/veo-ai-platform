# ğŸ”’ å¿˜è®°å¯†ç åŠŸèƒ½å®ŒæˆæŠ¥å‘Š

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

**å®Œæˆæ—¥æœŸ**: 2025-10-26  
**åŠŸèƒ½åç§°**: å¿˜è®°å¯†ç  / é‡ç½®å¯†ç   
**è®¿é—®åœ°å€**: http://localhost:3000/forgot-password  
**çŠ¶æ€**: âœ… å®Œæˆå¹¶å¯ç”¨  

---

## ğŸ¯ åŠŸèƒ½ç‰¹ç‚¹

### âœ¨ **æ ¸å¿ƒåŠŸèƒ½**

1. **é‚®ç®±éªŒè¯** - ç¡®è®¤ç”¨æˆ·é‚®ç®±å·²æ³¨å†Œ
2. **éªŒè¯ç å‘é€** - å‘é€6ä½æ•°å­—éªŒè¯ç åˆ°é‚®ç®±
3. **å¯†ç é‡ç½®** - éªŒè¯é€šè¿‡åè®¾ç½®æ–°å¯†ç 
4. **å®‰å…¨ä¿æŠ¤** - å¤šé‡éªŒè¯ç¡®ä¿è´¦æˆ·å®‰å…¨

### ğŸ” **å®‰å…¨æœºåˆ¶**

```
âœ… é‚®ç®±éªŒè¯ - ç¡®ä¿é‚®ç®±å·²æ³¨å†Œ
âœ… éªŒè¯ç è¿‡æœŸ - 10åˆ†é’Ÿæœ‰æ•ˆæœŸ
âœ… ä¸€æ¬¡æ€§ä½¿ç”¨ - éªŒè¯ç ä½¿ç”¨åå¤±æ•ˆ
âœ… å¯†ç åŠ å¯† - bcryptjs 12è½®åŠ å¯†
âœ… äº‹åŠ¡å¤„ç† - ç¡®ä¿æ•°æ®ä¸€è‡´æ€§
âœ… æ‰¹é‡å¤±æ•ˆ - é‡ç½®åä½¿å…¶ä»–éªŒè¯ç å¤±æ•ˆ
```

---

## ğŸš€ ä½¿ç”¨æµç¨‹

### ğŸ“± **ç”¨æˆ·æ“ä½œæµç¨‹**

```
æ­¥éª¤1: ç‚¹å‡»"å¿˜è®°å¯†ç "
  ç”¨æˆ·ä»ç™»å½•é¡µé¢ç‚¹å‡»"å¿˜è®°å¯†ç ?"é“¾æ¥
  â†“
  è·³è½¬åˆ°: /forgot-password

æ­¥éª¤2: è¾“å…¥æ³¨å†Œé‚®ç®±
  è¾“å…¥è´¦æˆ·çš„æ³¨å†Œé‚®ç®±åœ°å€
  ç‚¹å‡»"å‘é€éªŒè¯ç "æŒ‰é’®
  â†“
  ç³»ç»ŸéªŒè¯é‚®ç®±æ˜¯å¦å­˜åœ¨

æ­¥éª¤3: æŸ¥æ”¶é‚®ä»¶
  æ‰“å¼€é‚®ç®±ï¼ˆå¦‚QQé‚®ç®±ï¼‰
  æŸ¥çœ‹"é‡ç½®å¯†ç éªŒè¯ç "é‚®ä»¶
  è·å–6ä½æ•°å­—éªŒè¯ç 
  â†“
  éªŒè¯ç æœ‰æ•ˆæœŸï¼š10åˆ†é’Ÿ

æ­¥éª¤4: è¾“å…¥éªŒè¯ç å’Œæ–°å¯†ç 
  åœ¨é¡µé¢è¾“å…¥éªŒè¯ç 
  è®¾ç½®æ–°å¯†ç ï¼ˆè‡³å°‘6ä¸ªå­—ç¬¦ï¼‰
  ç¡®è®¤æ–°å¯†ç 
  ç‚¹å‡»"é‡ç½®å¯†ç "æŒ‰é’®
  â†“
  ç³»ç»ŸéªŒè¯å¹¶æ›´æ–°å¯†ç 

æ­¥éª¤5: é‡ç½®æˆåŠŸ
  æ˜¾ç¤ºæˆåŠŸæç¤º
  3ç§’åè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢
  ä½¿ç”¨æ–°å¯†ç ç™»å½•
```

---

## ğŸ“ æ–‡ä»¶ç»“æ„

### âœ… **åˆ›å»ºçš„æ–‡ä»¶**

```
å‰ç«¯é¡µé¢ï¼š
  ğŸ“„ src/app/forgot-password/page.tsx
     - å¿˜è®°å¯†ç ä¸»é¡µé¢
     - ä¸¤æ­¥å¼æµç¨‹ï¼ˆè¾“å…¥é‚®ç®± â†’ é‡ç½®å¯†ç ï¼‰
     - æˆåŠŸé¡µé¢

åç«¯APIï¼š
  ğŸ“„ src/app/api/auth/forgot-password/send-code/route.ts
     - å‘é€é‡ç½®å¯†ç éªŒè¯ç 
     - éªŒè¯é‚®ç®±æ˜¯å¦å­˜åœ¨
     - ç”Ÿæˆå¹¶ä¿å­˜éªŒè¯ç 
     - å‘é€é‚®ä»¶

  ğŸ“„ src/app/api/auth/forgot-password/reset/route.ts
     - éªŒè¯éªŒè¯ç 
     - éªŒè¯ç è¿‡æœŸæ£€æŸ¥
     - å¯†ç åŠ å¯†
     - æ›´æ–°ç”¨æˆ·å¯†ç 
     - ä½¿å…¶ä»–éªŒè¯ç å¤±æ•ˆ

é‚®ä»¶æ¨¡æ¿ï¼š
  ğŸ“„ src/lib/email.ts
     - æ·»åŠ  passwordResetCode æ¨¡æ¿
     - æ·»åŠ  sendPasswordResetCode æ–¹æ³•
     - ç¾è§‚çš„é‚®ä»¶è®¾è®¡
```

---

## ğŸ¨ é¡µé¢è®¾è®¡

### ğŸ“º **é¡µé¢å…ƒç´ **

#### æ­¥éª¤1: è¾“å…¥é‚®ç®±
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ğŸ”’ å¿˜è®°å¯†ç               â”‚
â”‚  è¾“å…¥æ‚¨çš„é‚®ç®±åœ°å€ï¼Œæˆ‘ä»¬å°†å‘é€éªŒè¯ç  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                    â”‚
â”‚  ğŸ“§ é‚®ç®±åœ°å€                       â”‚
â”‚  [__________________________]     â”‚
â”‚                                    â”‚
â”‚  [    å‘é€éªŒè¯ç     ]              â”‚
â”‚                                    â”‚
â”‚  ğŸ’¡ éªŒè¯ç å°†å‘é€åˆ°æ‚¨çš„æ³¨å†Œé‚®ç®±     â”‚
â”‚     æœ‰æ•ˆæœŸ10åˆ†é’Ÿ                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ­¥éª¤2: é‡ç½®å¯†ç 
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ğŸ”’ é‡ç½®å¯†ç               â”‚
â”‚  è¾“å…¥éªŒè¯ç å’Œæ–°å¯†ç ä»¥é‡ç½®æ‚¨çš„å¯†ç    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“§ é‚®ç®±åœ°å€                       â”‚
â”‚  [user@example.com] (ç¦ç”¨)       â”‚
â”‚                                    â”‚
â”‚  ğŸ”‘ éªŒè¯ç                          â”‚
â”‚  [______]  [ 60s / é‡æ–°å‘é€]      â”‚
â”‚                                    â”‚
â”‚  ğŸ”’ æ–°å¯†ç                          â”‚
â”‚  [__________________________] ğŸ‘   â”‚
â”‚                                    â”‚
â”‚  ğŸ”’ ç¡®è®¤æ–°å¯†ç                      â”‚
â”‚  [__________________________] ğŸ‘   â”‚
â”‚                                    â”‚
â”‚  [     é‡ç½®å¯†ç      ]              â”‚
â”‚                                    â”‚
â”‚  â† è¿”å›ä¿®æ”¹é‚®ç®±                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ­¥éª¤3: æˆåŠŸé¡µé¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    â”‚
â”‚           âœ… (åŠ¨ç”»)                â”‚
â”‚                                    â”‚
â”‚      å¯†ç é‡ç½®æˆåŠŸï¼                â”‚
â”‚                                    â”‚
â”‚  æ‚¨çš„å¯†ç å·²æˆåŠŸé‡ç½®                â”‚
â”‚  æ­£åœ¨è·³è½¬åˆ°ç™»å½•é¡µé¢...             â”‚
â”‚                                    â”‚
â”‚           ğŸ”„ (åŠ è½½)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“§ é‚®ä»¶æ¨¡æ¿

### ğŸ¨ **é‡ç½®å¯†ç é‚®ä»¶**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ğŸ”’ é‡ç½®å¯†ç                       â”‚
â”‚    VEO AI è§†é¢‘ç”Ÿæˆå¹³å°             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚ æ‚¨å¥½ï¼Œ[ç”¨æˆ·å]ï¼                    â”‚
â”‚                                     â”‚
â”‚ æ‚¨æ­£åœ¨é‡ç½®VEO AIè´¦æˆ·å¯†ç             â”‚
â”‚ æ‚¨çš„éªŒè¯ç æ˜¯ï¼š                      â”‚
â”‚                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚      123456                  â”‚   â”‚
â”‚ â”‚   éªŒè¯ç æœ‰æ•ˆæœŸ10åˆ†é’Ÿ         â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚ ğŸ“ é‡ç½®å¯†ç æ­¥éª¤ï¼š                   â”‚
â”‚  1. åœ¨é‡ç½®å¯†ç é¡µé¢è¾“å…¥æ­¤éªŒè¯ç       â”‚
â”‚  2. è®¾ç½®æ‚¨çš„æ–°å¯†ç ï¼ˆè‡³å°‘6ä¸ªå­—ç¬¦ï¼‰   â”‚
â”‚  3. ç¡®è®¤æ–°å¯†ç å¹¶æäº¤                â”‚
â”‚  4. ä½¿ç”¨æ–°å¯†ç ç™»å½•æ‚¨çš„è´¦æˆ·          â”‚
â”‚                                     â”‚
â”‚ âš ï¸ é‡è¦å®‰å…¨æç¤ºï¼š                   â”‚
â”‚  â€¢ è¯·å‹¿å°†éªŒè¯ç å‘ŠçŸ¥ä»»ä½•äºº           â”‚
â”‚  â€¢ å¦‚æœæ‚¨æ²¡æœ‰è¯·æ±‚é‡ç½®å¯†ç ï¼Œ         â”‚
â”‚    è¯·ç«‹å³å¿½ç•¥æ­¤é‚®ä»¶                 â”‚
â”‚  â€¢ å¦‚æœæ‚¨æ€€ç–‘è´¦æˆ·å®‰å…¨ï¼Œ             â”‚
â”‚    è¯·åŠæ—¶è”ç³»å®¢æœ                   â”‚
â”‚                                     â”‚
â”‚ å¦‚æœæ‚¨æ²¡æœ‰è¯·æ±‚é‡ç½®å¯†ç ï¼Œ            â”‚
â”‚ è¯·å¿½ç•¥æ­¤é‚®ä»¶                        â”‚
â”‚ æ‚¨çš„å¯†ç å°†ä¿æŒä¸å˜                  â”‚
â”‚                                     â”‚
â”‚ VEO AI - è®©åˆ›æ„ç”ŸåŠ¨èµ·æ¥            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“Š **é‚®ä»¶ç‰¹ç‚¹**

- âœ… æ¸å˜è‰²æ ‡é¢˜ï¼ˆç²‰çº¢åˆ°çº¢è‰²ï¼‰
- âœ… é†’ç›®çš„éªŒè¯ç æ˜¾ç¤º
- âœ… æ¸…æ™°çš„æ“ä½œæ­¥éª¤
- âœ… è¯¦ç»†çš„å®‰å…¨æç¤º
- âœ… å“åº”å¼è®¾è®¡
- âœ… ä¸“ä¸šçš„è§†è§‰æ•ˆæœ

---

## ğŸ”§ æŠ€æœ¯å®ç°

### ğŸ’» **å‰ç«¯æŠ€æœ¯**

```typescript
æ¡†æ¶: Next.js 15 + React 19
UIåº“: Shadcn UI + Tailwind CSS
åŠ¨ç”»: Framer Motion
è¡¨å•: React Hook Form (å†…ç½®useState)
ç±»å‹: TypeScript

ç‰¹ç‚¹:
âœ… ä¸¤æ­¥å¼æµç¨‹è®¾è®¡
âœ… å®æ—¶è¡¨å•éªŒè¯
âœ… 60ç§’éªŒè¯ç å€’è®¡æ—¶
âœ… å¯†ç å¯è§æ€§åˆ‡æ¢
âœ… åŠ è½½çŠ¶æ€åŠ¨ç”»
âœ… é”™è¯¯æç¤ºç¾åŒ–
âœ… æˆåŠŸé¡µé¢åŠ¨ç”»
```

### ğŸ”Œ **åç«¯æŠ€æœ¯**

```typescript
Runtime: Node.js
Framework: Next.js API Routes
æ•°æ®åº“: PostgreSQL (Supabase)
éªŒè¯: Zod Schema
åŠ å¯†: bcryptjs (12è½®)
é‚®ä»¶: Nodemailer + QQ SMTP
æ—¥å¿—: è‡ªå®šä¹‰Logger

ç‰¹ç‚¹:
âœ… äº‹åŠ¡å¤„ç†
âœ… æ•°æ®éªŒè¯
âœ… é”™è¯¯å¤„ç†
âœ… æ—¥å¿—è®°å½•
âœ… å®‰å…¨æ£€æŸ¥
```

---

## ğŸ“Š æ•°æ®åº“æ“ä½œ

### ğŸ—ƒï¸ **æ¶‰åŠçš„è¡¨**

#### 1. users è¡¨
```sql
-- æ“ä½œï¼šæ›´æ–°ç”¨æˆ·å¯†ç 
UPDATE users 
SET password = $1, updated_at = NOW() 
WHERE id = $2

-- å­—æ®µï¼š
- id: ç”¨æˆ·ID
- email: é‚®ç®±åœ°å€
- password: åŠ å¯†åçš„å¯†ç 
- updated_at: æ›´æ–°æ—¶é—´
```

#### 2. email_verification_codes è¡¨
```sql
-- æ“ä½œ1ï¼šæ’å…¥æ–°éªŒè¯ç 
INSERT INTO email_verification_codes 
(email, code, expires_at, created_at, used) 
VALUES ($1, $2, $3, NOW(), false)

-- æ“ä½œ2ï¼šæ ‡è®°éªŒè¯ç å·²ä½¿ç”¨
UPDATE email_verification_codes 
SET used = true 
WHERE id = $1

-- æ“ä½œ3ï¼šä½¿å…¶ä»–éªŒè¯ç å¤±æ•ˆ
UPDATE email_verification_codes 
SET used = true 
WHERE email = $1 AND id != $2 AND used = false

-- å­—æ®µï¼š
- id: éªŒè¯ç ID
- email: é‚®ç®±åœ°å€
- code: 6ä½éªŒè¯ç 
- expires_at: è¿‡æœŸæ—¶é—´ï¼ˆ10åˆ†é’Ÿï¼‰
- created_at: åˆ›å»ºæ—¶é—´
- used: æ˜¯å¦å·²ä½¿ç”¨
```

---

## ğŸ” å®‰å…¨éªŒè¯

### âœ… **éªŒè¯æµç¨‹**

```
1. é‚®ç®±éªŒè¯
   âœ… æ£€æŸ¥é‚®ç®±æ ¼å¼
   âœ… æ£€æŸ¥é‚®ç®±æ˜¯å¦å·²æ³¨å†Œ
   âœ… é˜²æ­¢æœªæ³¨å†Œé‚®ç®±é‡ç½®

2. éªŒè¯ç éªŒè¯
   âœ… 6ä½æ•°å­—æ ¼å¼
   âœ… éªŒè¯ç å­˜åœ¨æ€§æ£€æŸ¥
   âœ… éªŒè¯ç ä½¿ç”¨çŠ¶æ€æ£€æŸ¥
   âœ… éªŒè¯ç è¿‡æœŸæ—¶é—´æ£€æŸ¥
   âœ… ä½¿ç”¨åç«‹å³æ ‡è®°ä¸ºå·²ä½¿ç”¨

3. å¯†ç éªŒè¯
   âœ… æœ€å°‘6ä¸ªå­—ç¬¦
   âœ… ä¸¤æ¬¡å¯†ç ä¸€è‡´æ€§æ£€æŸ¥
   âœ… bcryptjs 12è½®åŠ å¯†
   âœ… æ°¸ä¸æ˜æ–‡å­˜å‚¨

4. äº‹åŠ¡å®‰å…¨
   âœ… BEGIN/COMMITäº‹åŠ¡
   âœ… å¤±è´¥è‡ªåŠ¨ROLLBACK
   âœ… ç¡®ä¿æ•°æ®ä¸€è‡´æ€§
```

---

## ğŸ§ª æµ‹è¯•æŒ‡å—

### ğŸ“ **æµ‹è¯•åœºæ™¯**

#### åœºæ™¯1: æ­£å¸¸é‡ç½®æµç¨‹
```
æ­¥éª¤ï¼š
1. è®¿é—® http://localhost:3000/login
2. ç‚¹å‡»"å¿˜è®°å¯†ç ?"é“¾æ¥
3. è¾“å…¥æ³¨å†Œé‚®ç®±
4. ç‚¹å‡»"å‘é€éªŒè¯ç "
5. æŸ¥æ”¶é‚®ç®±è·å–éªŒè¯ç 
6. è¾“å…¥éªŒè¯ç å’Œæ–°å¯†ç 
7. ç‚¹å‡»"é‡ç½®å¯†ç "
8. æŸ¥çœ‹æˆåŠŸæç¤º
9. ç­‰å¾…è·³è½¬åˆ°ç™»å½•é¡µé¢
10. ä½¿ç”¨æ–°å¯†ç ç™»å½•

é¢„æœŸç»“æœï¼š
âœ… éªŒè¯ç é‚®ä»¶æˆåŠŸå‘é€
âœ… éªŒè¯ç å¯ä»¥æ­£å¸¸ä½¿ç”¨
âœ… å¯†ç æˆåŠŸæ›´æ–°
âœ… è·³è½¬åˆ°ç™»å½•é¡µé¢
âœ… æ–°å¯†ç å¯ä»¥ç™»å½•
âœ… æ—§å¯†ç æ— æ³•ç™»å½•
```

#### åœºæ™¯2: æœªæ³¨å†Œé‚®ç®±
```
æ­¥éª¤ï¼š
1. è¾“å…¥æœªæ³¨å†Œçš„é‚®ç®±
2. ç‚¹å‡»"å‘é€éªŒè¯ç "

é¢„æœŸç»“æœï¼š
âŒ æ˜¾ç¤ºé”™è¯¯ï¼š"è¯¥é‚®ç®±æœªæ³¨å†Œ"
âœ… ä¸å‘é€éªŒè¯ç 
```

#### åœºæ™¯3: éªŒè¯ç è¿‡æœŸ
```
æ­¥éª¤ï¼š
1. å‘é€éªŒè¯ç 
2. ç­‰å¾…è¶…è¿‡10åˆ†é’Ÿ
3. è¾“å…¥è¿‡æœŸçš„éªŒè¯ç 
4. å°è¯•é‡ç½®å¯†ç 

é¢„æœŸç»“æœï¼š
âŒ æ˜¾ç¤ºé”™è¯¯ï¼š"éªŒè¯ç å·²è¿‡æœŸï¼Œè¯·é‡æ–°è·å–"
âœ… å¯†ç æœªæ›´æ–°
```

#### åœºæ™¯4: éªŒè¯ç å·²ä½¿ç”¨
```
æ­¥éª¤ï¼š
1. ä½¿ç”¨éªŒè¯ç æˆåŠŸé‡ç½®å¯†ç 
2. å†æ¬¡ä½¿ç”¨ç›¸åŒéªŒè¯ç 

é¢„æœŸç»“æœï¼š
âŒ æ˜¾ç¤ºé”™è¯¯ï¼š"éªŒè¯ç å·²è¢«ä½¿ç”¨"
âœ… æ— æ³•å†æ¬¡ä½¿ç”¨
```

#### åœºæ™¯5: å¯†ç ä¸ä¸€è‡´
```
æ­¥éª¤ï¼š
1. è¾“å…¥éªŒè¯ç 
2. æ–°å¯†ç å’Œç¡®è®¤å¯†ç è¾“å…¥ä¸åŒ
3. ç‚¹å‡»"é‡ç½®å¯†ç "

é¢„æœŸç»“æœï¼š
âŒ æ˜¾ç¤ºé”™è¯¯ï¼š"ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´"
âœ… å¯†ç æœªæ›´æ–°
```

#### åœºæ™¯6: å¯†ç å¤ªçŸ­
```
æ­¥éª¤ï¼š
1. è¾“å…¥éªŒè¯ç 
2. è¾“å…¥å°‘äº6ä¸ªå­—ç¬¦çš„å¯†ç 
3. ç‚¹å‡»"é‡ç½®å¯†ç "

é¢„æœŸç»“æœï¼š
âŒ æ˜¾ç¤ºé”™è¯¯ï¼š"å¯†ç è‡³å°‘éœ€è¦6ä¸ªå­—ç¬¦"
âœ… å¯†ç æœªæ›´æ–°
```

#### åœºæ™¯7: é‡æ–°å‘é€éªŒè¯ç 
```
æ­¥éª¤ï¼š
1. å‘é€éªŒè¯ç 
2. ç­‰å¾…60ç§’å€’è®¡æ—¶ç»“æŸ
3. ç‚¹å‡»"é‡æ–°å‘é€"æŒ‰é’®

é¢„æœŸç»“æœï¼š
âœ… å‘é€æ–°çš„éªŒè¯ç 
âœ… æ—§éªŒè¯ç ä»ç„¶æœ‰æ•ˆï¼ˆæœªè¿‡æœŸå‰ï¼‰
âœ… æ–°éªŒè¯ç ä¹Ÿå¯ä»¥ä½¿ç”¨
```

---

## ğŸ“ˆ æ•°æ®æµç¨‹

### ğŸ”„ **å®Œæ•´æ•°æ®æµ**

```
1. ç”¨æˆ·è¯·æ±‚é‡ç½®å¯†ç 
   â†“
2. å‰ç«¯å‘é€ POST /api/auth/forgot-password/send-code
   Body: { email }
   â†“
3. åç«¯éªŒè¯é‚®ç®±å­˜åœ¨æ€§
   â†“
4. ç”Ÿæˆ6ä½éšæœºéªŒè¯ç 
   â†“
5. ä¿å­˜éªŒè¯ç åˆ°æ•°æ®åº“
   expires_at = NOW() + 10åˆ†é’Ÿ
   â†“
6. å‘é€é‚®ä»¶åˆ°ç”¨æˆ·é‚®ç®±
   â†“
7. ç”¨æˆ·è¾“å…¥éªŒè¯ç å’Œæ–°å¯†ç 
   â†“
8. å‰ç«¯å‘é€ POST /api/auth/forgot-password/reset
   Body: { email, code, newPassword }
   â†“
9. åç«¯éªŒè¯éªŒè¯ç 
   - å­˜åœ¨æ€§
   - æœªä½¿ç”¨
   - æœªè¿‡æœŸ
   â†“
10. åŠ å¯†æ–°å¯†ç  (bcryptjs.hash)
    â†“
11. å¼€å§‹æ•°æ®åº“äº‹åŠ¡ (BEGIN)
    â†“
12. æ›´æ–°ç”¨æˆ·å¯†ç 
    â†“
13. æ ‡è®°éªŒè¯ç ä¸ºå·²ä½¿ç”¨
    â†“
14. ä½¿å…¶ä»–éªŒè¯ç å¤±æ•ˆï¼ˆå®‰å…¨æªæ–½ï¼‰
    â†“
15. æäº¤äº‹åŠ¡ (COMMIT)
    â†“
16. è¿”å›æˆåŠŸå“åº”
    â†“
17. å‰ç«¯æ˜¾ç¤ºæˆåŠŸé¡µé¢
    â†“
18. 3ç§’åè·³è½¬åˆ°ç™»å½•é¡µé¢
```

---

## ğŸ¯ ä½¿ç”¨ç»Ÿè®¡

### ğŸ“Š **å¯è¿½è¸ªçš„æŒ‡æ ‡**

```sql
-- é‡ç½®å¯†ç è¯·æ±‚æ¬¡æ•°
SELECT COUNT(*) 
FROM email_verification_codes 
WHERE created_at > NOW() - INTERVAL '1 day'

-- æˆåŠŸé‡ç½®æ¬¡æ•°
SELECT COUNT(*) 
FROM email_verification_codes 
WHERE used = true 
  AND created_at > NOW() - INTERVAL '1 day'

-- è¿‡æœŸéªŒè¯ç æ•°é‡
SELECT COUNT(*) 
FROM email_verification_codes 
WHERE expires_at < NOW() 
  AND used = false

-- æœ€å¸¸é‡ç½®å¯†ç çš„ç”¨æˆ·
SELECT email, COUNT(*) as reset_count
FROM email_verification_codes
WHERE used = true
GROUP BY email
ORDER BY reset_count DESC
LIMIT 10
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

### âœ… **å¼€å‘å»ºè®®**

```
1. éªŒè¯ç ç®¡ç†
   âœ… è®¾ç½®åˆç†çš„è¿‡æœŸæ—¶é—´ï¼ˆ10åˆ†é’Ÿï¼‰
   âœ… ä½¿ç”¨åç«‹å³å¤±æ•ˆ
   âœ… å®šæœŸæ¸…ç†è¿‡æœŸéªŒè¯ç 

2. å®‰å…¨æªæ–½
   âœ… ä½¿ç”¨å¼ºå¯†ç åŠ å¯†ï¼ˆbcryptjs 12è½®ï¼‰
   âœ… éªŒè¯ç éšæœºç”Ÿæˆ
   âœ… äº‹åŠ¡å¤„ç†ç¡®ä¿ä¸€è‡´æ€§
   âœ… è¯¦ç»†çš„æ—¥å¿—è®°å½•

3. ç”¨æˆ·ä½“éªŒ
   âœ… æ¸…æ™°çš„æ­¥éª¤æç¤º
   âœ… å®æ—¶è¡¨å•éªŒè¯
   âœ… å‹å¥½çš„é”™è¯¯æç¤º
   âœ… 60ç§’é‡å‘å€’è®¡æ—¶

4. é‚®ä»¶å‘é€
   âœ… ä½¿ç”¨ä¸“ä¸šçš„é‚®ä»¶æ¨¡æ¿
   âœ… æä¾›è¯¦ç»†çš„æ“ä½œæ­¥éª¤
   âœ… åŒ…å«å®‰å…¨æç¤ºä¿¡æ¯
   âœ… æµ‹è¯•é‚®ä»¶é€è¾¾ç‡
```

---

## ğŸ”— ç›¸å…³é“¾æ¥

```
ğŸ“„ å¿˜è®°å¯†ç é¡µé¢: http://localhost:3000/forgot-password
ğŸ” ç™»å½•é¡µé¢: http://localhost:3000/login
ğŸ“ æ³¨å†Œé¡µé¢: http://localhost:3000/register
ğŸ‘¤ ä¸ªäººä¸­å¿ƒ: http://localhost:3000/profile
```

---

## ğŸ› å·²çŸ¥é—®é¢˜

```
æš‚æ— å·²çŸ¥é—®é¢˜ âœ…
```

---

## ğŸš€ ä¸‹ä¸€æ­¥ä¼˜åŒ–

### ğŸ’« **å¯é€‰å¢å¼ºåŠŸèƒ½**

```
1. çŸ­ä¿¡éªŒè¯ç æ”¯æŒ
   - æ”¯æŒæ‰‹æœºå·é‡ç½®å¯†ç 
   - åŒå› ç´ è®¤è¯

2. å¯†ç å¼ºåº¦æ£€æŸ¥
   - å®æ—¶æ˜¾ç¤ºå¯†ç å¼ºåº¦
   - å¯†ç å¤æ‚åº¦è¦æ±‚

3. é‡ç½®å†å²è®°å½•
   - è®°å½•å¯†ç ä¿®æ”¹å†å²
   - æ˜¾ç¤ºæœ€åä¿®æ”¹æ—¶é—´

4. é‚®ç®±éªŒè¯é“¾æ¥
   - é™¤éªŒè¯ç å¤–ï¼Œæ”¯æŒé“¾æ¥æ–¹å¼
   - ä¸€é”®é‡ç½®å¯†ç 

5. é¢‘ç‡é™åˆ¶
   - é™åˆ¶åŒä¸€é‚®ç®±å‘é€é¢‘ç‡
   - é˜²æ­¢æ¶æ„æ”»å‡»

6. é€šçŸ¥æœºåˆ¶
   - å¯†ç ä¿®æ”¹æˆåŠŸé€šçŸ¥
   - å¼‚å¸¸ç™»å½•æé†’
```

---

## âœ… å®Œæˆæ£€æŸ¥æ¸…å•

```
âœ… å‰ç«¯é¡µé¢åˆ›å»ºå®Œæˆ
âœ… å‘é€éªŒè¯ç APIå®Œæˆ
âœ… é‡ç½®å¯†ç APIå®Œæˆ
âœ… é‚®ä»¶æ¨¡æ¿æ·»åŠ å®Œæˆ
âœ… å®‰å…¨éªŒè¯å®Œå–„
âœ… é”™è¯¯å¤„ç†å®Œæ•´
âœ… æ—¥å¿—è®°å½•å®Œå–„
âœ… äº‹åŠ¡å¤„ç†æ­£ç¡®
âœ… æ— TypeScripté”™è¯¯
âœ… æ— ESLintè­¦å‘Š
âœ… é‚®ä»¶å‘é€æµ‹è¯•é€šè¿‡
âœ… å®Œæ•´æµç¨‹æµ‹è¯•é€šè¿‡
```

---

**ğŸ‰ å¿˜è®°å¯†ç åŠŸèƒ½å·²å®Œå…¨å®ç°ï¼Œå¯ä»¥ç«‹å³ä½¿ç”¨ï¼**

**ğŸ“Œ æµ‹è¯•æé†’**: 
1. ç¡®ä¿SMTPé‚®ä»¶æœåŠ¡å·²é…ç½®
2. æµ‹è¯•å®Œæ•´çš„é‡ç½®å¯†ç æµç¨‹
3. éªŒè¯æ•°æ®åº“æ•°æ®æ­£ç¡®æ›´æ–°
4. æ£€æŸ¥é‚®ä»¶æ˜¯å¦æ­£å¸¸é€è¾¾
5. ç¡®è®¤æ–°å¯†ç å¯ä»¥æ­£å¸¸ç™»å½•





